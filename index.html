<!DOCTYPE html>
<html lang="sw">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>DR. WILLIAM Â· KUSOMA KADI ZA KIORACLE Â· KILINGE CHA HEKIMA</title>
  <!-- Tailwind + mystical fonts + extra smoothness -->
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700;900&family=Playfair+Display:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    /* background yenye texture ya kadi za kale */
    body {
      background: #0c0715;
      background-image: 
        radial-gradient(circle at 30% 40%, rgba(175, 140, 70, 0.15) 0%, transparent 30%),
        radial-gradient(circle at 80% 70%, rgba(100, 70, 130, 0.2) 0%, transparent 35%),
        repeating-linear-gradient(45deg, rgba(212, 175, 55, 0.02) 0px, rgba(212, 175, 55, 0.02) 2px, transparent 2px, transparent 8px);
      font-family: 'Playfair Display', serif;
      min-height: 100vh;
      color: #f0e9f0;
      position: relative;
    }
    /* safu ya glasi iliyosafishwa */
    .glass-master {
      background: rgba(18, 10, 26, 0.4);
      backdrop-filter: blur(16px) saturate(200%);
      -webkit-backdrop-filter: blur(16px);
      border: 1px solid rgba(212, 175, 55, 0.3);
      box-shadow: 0 40px 70px -15px #000, 0 0 0 1px #b49450 inset;
      border-radius: 3rem;
    }
    .gold-glow {
      color: #f5dcb4;
      text-shadow: 0 0 15px #cfaa5a, 0 4px 10px #000;
    }
    .card-flip {
      perspective: 2500px;
      transform-style: preserve-3d;
    }
    .card-inner {
      transition: transform 1.2s cubic-bezier(0.25, 0.8, 0.25, 1.2);
      transform-style: preserve-3d;
      position: relative;
      width: 100%;
      height: 100%;
    }
    .card-front, .card-back {
      backface-visibility: hidden;
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      border-radius: 2rem;
      overflow: hidden;
      border: 2px solid #caa75b;
      box-shadow: 0 25px 40px -8px black;
    }
    .card-front {
      background: linear-gradient(145deg, #271f33, #1f1729);
      transform: rotateY(180deg);
      display: flex;
      flex-direction: column;
    }
    .card-back {
      background: #221c2b;
      background-image: url('https://images.unsplash.com/photo-1617791160505-6f00504e3519?q=80&w=1964&auto=format&fit=crop');
      background-size: 120% 120%;
      background-position: center;
      transform: rotateY(0deg);
      border: 2px solid #e2c082;
    }
    .flipped .card-inner {
      transform: rotateY(180deg);
    }
    /* kadi zinazoruka â€“ muda mrefu na wingi */
    .shuffle-particle {
      position: absolute;
      width: 70px;
      height: 110px;
      background: url('https://images.unsplash.com/photo-1617791160505-6f00504e3519?q=80&w=1964&auto=format&fit=crop') center/cover;
      border-radius: 16px;
      border: 2px solid #d4af37;
      opacity: 0;
      animation: flyLong 5.5s cubic-bezier(0.15, 0.85, 0.35, 1) forwards;
      pointer-events: none;
      box-shadow: 0 0 40px #ffd966, 0 0 15px #b8860b;
      will-change: transform, opacity;
    }
    @keyframes flyLong {
      0% { transform: translate(var(--start-x), var(--start-y)) scale(0.1) rotate(0deg); opacity: 0; filter: blur(8px); }
      5% { opacity: 0.9; filter: blur(2px); }
      80% { opacity: 0.8; }
      100% { transform: translate(var(--end-x), var(--end-y)) scale(1) rotate(var(--rot)); opacity: 0.15; filter: blur(0); }
    }
    /* modal ya kikomo */
    .modal-premium {
      background: rgba(20, 8, 28, 0.95);
      backdrop-filter: blur(24px);
      border: 2px solid #b89e5a;
      box-shadow: 0 0 60px #aa7e44;
    }
    .btn-royal {
      background: linear-gradient(145deg, #b28d4a, #e7cb8a);
      color: #0a0412;
      font-weight: 800;
      border: none;
      box-shadow: 0 10px 30px #d4a747;
      transition: all 0.25s;
    }
    .btn-royal:hover {
      background: linear-gradient(145deg, #cfaa60, #ffeaaf);
      transform: scale(1.04);
      box-shadow: 0 10px 45px #f8d070;
    }
    .dr-logo {
      font-family: 'Cinzel', serif;
      background: linear-gradient(135deg, #f2ddb0, #d8b15a);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 900;
      font-size: 3rem;
      letter-spacing: 5px;
      filter: drop-shadow(0 4px 6px black);
    }
    /* kitufe cha next page kizuri */
    .next-page-btn {
      background: linear-gradient(145deg, #8a6e3f, #c9aa5e);
      border: 2px solid #f5d37c;
      color: #0f0a1a;
      font-weight: bold;
      padding: 1rem 3rem;
      border-radius: 60px;
      font-size: 1.8rem;
      box-shadow: 0 10px 30px #b38b40, 0 0 20px #ffdb9d inset;
      transition: all 0.3s ease;
      display: inline-flex;
      align-items: center;
      gap: 15px;
      text-decoration: none;
    }
    .next-page-btn:hover {
      background: linear-gradient(145deg, #a7874a, #e8cf88);
      transform: scale(1.08);
      box-shadow: 0 15px 40px #e5b85c;
      border-color: #ffeaaf;
    }
  </style>
</head>
<body class="flex items-center justify-center p-4">

  <!-- MODAL YA KIKOMO (mara 2 kwa siku) -->
  <div id="limitModal" class="fixed inset-0 flex items-center justify-center z-[100] hidden px-4">
    <div class="absolute inset-0 bg-black/70 backdrop-blur-sm" onclick="closeLimitModal()"></div>
    <div class="modal-premium rounded-3xl p-9 max-w-lg w-full text-center relative z-10 border border-amber-700/80">
      <i class="fas fa-moon-star text-7xl gold-glow mb-5"></i>
      <h3 class="font-['Cinzel'] text-4xl gold-glow mb-3">Umefikia kikomo</h3>
      <p class="text-amber-100/90 text-2xl">Umesoma kadi mara mbili katika saa 24. Rudi baada ya muda kwa muongozo mwingine.</p>
      <button onclick="closeLimitModal()" class="mt-8 btn-royal px-10 py-4 rounded-full text-2xl">Nimeelewa</button>
    </div>
  </div>

  <main class="w-full max-w-7xl">

    <!-- nembo ya DR. WILLIAM -->
    <div class="text-center mb-4">
      <span class="dr-logo">á›­ DR. WILLIAM  á›­</span>
      <p class="text-2xl text-amber-300/80 italic mt-2">Kusoma Kadi za Kioracle Â· Lango la Hekima</p>
    </div>

    <!-- chombo kikuu cha glasi -->
    <div class="glass-master p-6 md:p-10 relative overflow-hidden">

      <!-- eneo la kurusha kadi (shuffle) -->
      <div id="shuffleCloud" class="absolute inset-0 pointer-events-none z-20 hidden" style="perspective: 1500px;"></div>

      <!-- SCREEN YA MWANZO -->
      <div id="startScreen" class="text-center py-16">
        <i class="fas fa-crystal-ball text-8xl gold-glow mb-6"></i>
        <h2 class="font-['Cinzel'] text-6xl gold-glow mb-5">Fungua Lango</h2>
        <p class="text-2xl text-white/80 mb-12 max-w-2xl mx-auto">Kadi 130+ zitachanganyika kwa nguvu ya kiroho, kisha tatu za nyota yako zitajitokeza moja baada ya nyingine.</p>
        <button id="vutaKadiBtn" class="btn-royal text-3xl px-16 py-6 rounded-full shadow-2xl">
          <i class="fas fa-hand-sparkles mr-4"></i>VUTA KADI
        </button>
      </div>

      <!-- ENEO LA KUSOMA (limefichwa mwanzoni) -->
      <div id="readingArea" class="hidden">

        <!-- viashiria vya hatua -->
        <div class="flex justify-center items-center gap-5 mb-10 text-2xl">
          <span id="step1Badge" class="w-14 h-14 rounded-full bg-amber-800/30 border-4 border-amber-500/40 flex items-center justify-center font-black text-2xl">1</span>
          <span class="w-24 h-1 bg-amber-700/60"></span>
          <span id="step2Badge" class="w-14 h-14 rounded-full bg-amber-800/30 border-4 border-amber-500/40 flex items-center justify-center font-black text-2xl">2</span>
          <span class="w-24 h-1 bg-amber-700/60"></span>
          <span id="step3Badge" class="w-14 h-14 rounded-full bg-amber-800/30 border-4 border-amber-500/40 flex items-center justify-center font-black text-2xl">3</span>
        </div>

        <!-- KADI TATU ZINAZOGEUKA -->
        <div class="flex flex-col lg:flex-row justify-center items-center gap-8 lg:gap-10">
          <!-- KADI 1 â€“ Ujumbe wa siku -->
          <div id="card1" class="card-flip w-80 h-[450px] opacity-0 transition-opacity duration-700">
            <div class="card-inner">
              <div class="card-back"></div>
              <div class="card-front p-5 flex flex-col" id="card1Front">
                <div class="flex justify-between items-start">
                  <span class="text-sm bg-black/50 px-4 py-1 rounded-full border border-amber-500">âœ¦ UJUMBE WA SIKU âœ¦</span>
                  <i class="fas fa-bookmark text-amber-400 text-3xl cursor-pointer hover:text-amber-200 transition" onclick="hifadhiKadi(0)"></i>
                </div>
                <div class="flex-1 flex flex-col items-center justify-center text-center px-3">
                  <img id="card1Img" src="" class="w-28 h-28 rounded-full border-4 border-amber-500 mb-4 object-cover shadow-2xl" alt="oracle">
                  <h3 id="card1Title" class="font-bold text-3xl gold-glow mb-2"></h3>
                  <p id="card1Msg" class="text-lg text-white/90 leading-relaxed"></p>
                </div>
              </div>
            </div>
          </div>
          <!-- KADI 2 â€“ Muongozo wa hatua -->
          <div id="card2" class="card-flip w-80 h-[450px] opacity-0 transition-opacity duration-700">
            <div class="card-inner">
              <div class="card-back"></div>
              <div class="card-front p-5 flex flex-col" id="card2Front">
                <div class="flex justify-between items-start">
                  <span class="text-sm bg-black/50 px-4 py-1 rounded-full border border-amber-500">âœ¦ MUONGOZO WA HATUA âœ¦</span>
                  <i class="fas fa-bookmark text-amber-400 text-3xl cursor-pointer hover:text-amber-200 transition" onclick="hifadhiKadi(1)"></i>
                </div>
                <div class="flex-1 flex flex-col items-center justify-center text-center px-3">
                  <img id="card2Img" src="" class="w-28 h-28 rounded-full border-4 border-amber-500 mb-4 object-cover" alt="oracle">
                  <h3 id="card2Title" class="font-bold text-3xl gold-glow mb-2"></h3>
                  <p id="card2Msg" class="text-lg text-white/90 leading-relaxed"></p>
                </div>
              </div>
            </div>
          </div>
          <!-- KADI 3 â€“ Hitimisho / Baraka -->
          <div id="card3" class="card-flip w-80 h-[450px] opacity-0 transition-opacity duration-700">
            <div class="card-inner">
              <div class="card-back"></div>
              <div class="card-front p-5 flex flex-col" id="card3Front">
                <div class="flex justify-between items-start">
                  <span class="text-sm bg-black/50 px-4 py-1 rounded-full border border-amber-500">âœ¦ HITIMISHO / BARAKA âœ¦</span>
                  <i class="fas fa-bookmark text-amber-400 text-3xl cursor-pointer hover:text-amber-200 transition" onclick="hifadhiKadi(2)"></i>
                </div>
                <div class="flex-1 flex flex-col items-center justify-center text-center px-3">
                  <img id="card3Img" src="" class="w-28 h-28 rounded-full border-4 border-amber-500 mb-4 object-cover" alt="oracle">
                  <h3 id="card3Title" class="font-bold text-3xl gold-glow mb-2"></h3>
                  <p id="card3Msg" class="text-lg text-white/90 leading-relaxed"></p>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- vifungo vya kusogeza -->
        <div id="nextCardContainer" class="flex justify-center mt-14">
          <button id="nextCardBtn" class="btn-royal px-14 py-5 rounded-full text-3xl"><i class="fas fa-arrow-right mr-4"></i>KADI INAYOFUATA</button>
        </div>
        <div id="postReadingNav" class="flex justify-center items-center gap-8 mt-14 hidden">
          <button id="kadiNyingineBtn" class="btn-royal px-12 py-5 rounded-full text-3xl"><i class="fas fa-redo-alt mr-3"></i>SOMA TENA</button>
        </div>

      </div> <!-- readingArea -->

      <!-- KITUFE KIZURI CHA NEXT PAGE (kiko chini kabisa, nje ya readingArea ili ionekane wakati wote) -->
      <div class="flex justify-center mt-16 mb-4">
        <a href="#" id="nextPageLink" class="next-page-btn">
          <i class="fas fa-door-open"></i> FUNGUA UKURASA UNAOFUATA
          <i class="fas fa-arrow-right"></i>
        </a>
      </div>
      <p class="text-center text-amber-700/70 text-sm mb-2">(badilisha kiungo kwenye sifa ya <code class="bg-black/30 px-2 py-1 rounded">href</code> ya kitufe)</p>

      <!-- footer nembo ndogo -->
      <div class="text-center text-amber-800/50 text-base mt-6">Â·  DR. WILLIAM  Â·  KILINGE CHA HEKIMA  Â·</div>
    </div> <!-- glass-master -->
  </main>

  <script>
    (function() {
      // ---------- HAZINA KADI (130+ zenye picha za kioracle) ----------
      const oracleImages = [
        'https://images.unsplash.com/photo-1609966864821-62dcc502ece6?q=80&w=1000&auto=format', // kikombe
        'https://images.unsplash.com/photo-1612966872597-2d9e2b5f8f6b?q=80&w=1000&auto=format', // upanga
        'https://images.unsplash.com/photo-1589301760014-d929f3979dbc?q=80&w=1000&auto=format', // sarafu
        'https://images.unsplash.com/photo-1611485988300-b7e681c5e9c2?q=80&w=1000&auto=format', // fimbo
        'https://images.unsplash.com/photo-1507409613952-518459ac866d?q=80&w=1000&auto=format', // taji
        'https://images.unsplash.com/photo-1518199266791-5375a83190b7?q=80&w=1000&auto=format', // moyo
        'https://images.unsplash.com/photo-1465146633011-14f8e0781093?q=80&w=1000&auto=format', // maua
        'https://images.unsplash.com/photo-1602631985686-8bb0e905f202?q=80&w=1000&auto=format', // nyota
        'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?q=80&w=1000&auto=format', // mwezi
        'https://images.unsplash.com/photo-1518837695005-2083093ee35b?q=80&w=1000&auto=format', // maji
        'https://images.unsplash.com/photo-1598971639058-9999004b79fd?q=80&w=1000&auto=format', // tembo
        'https://images.unsplash.com/photo-1546182990-dffeafbe841d?q=80&w=1000&auto=format', // simba
        'https://images.unsplash.com/photo-1519947486511-46149fa0a254?q=80&w=1000&auto=format', // nyoka
        'https://images.unsplash.com/photo-1617791160536-598cf32026f7?q=80&w=1000&auto=format', // fuwele
        'https://images.unsplash.com/photo-1621155346337-1d19476ba7d6?q=80&w=1000&auto=format', // kioo
        'https://images.unsplash.com/photo-1543007631-283050bb3f8c?q=80&w=1000&auto=format', // malaika
        'https://images.unsplash.com/photo-1527526029430-319f10814153?q=80&w=1000&auto=format', // watoto
        'https://images.unsplash.com/photo-1599930113854-035c6a15f3e9?q=80&w=1000&auto=format', // mti
        'https://images.unsplash.com/photo-1578926288007-5b699c8e0e07?q=80&w=1000&auto=format', // tembo mwingine
        'https://images.unsplash.com/photo-1586767003402-5bc7e8c5e3f1?q=80&w=1000&auto=format', // ngoma
        'https://images.unsplash.com/photo-1611510338559-2f463335092c?q=80&w=1000&auto=format', // njiwa
        'https://images.unsplash.com/photo-1515542625006-cd76c2776a5c?q=80&w=1000&auto=format', // ushungi
        'https://images.unsplash.com/photo-1580793241553-e9f1cce181af?q=80&w=1000&auto=format', // jiwe
        'https://images.unsplash.com/photo-1612966872597-2d9e2b5f8f6b?q=80&w=1000&auto=format'  // upanga mwingine
      ];
      const titles = [
        "Kikombe cha Mwezi", "Upanga wa Ulimwengu", "Sarafu ya Rehema", "Fimbo ya Wazee", "Taji la Nyota",
        "Moyo wa Upendo", "Ua la Amani", "Nyota ya Mchana", "Mwezi Mtukufu", "Chemchemi ya Uzima",
        "Tembo wa Hekima", "Simba wa Ushujaa", "Nyoka ya Uponyaji", "Fuwele la Nuru", "Kioo cha Ukweli",
        "Malaika Mlinzi", "Mtoto wa Furaha", "Mti wa Baraka", "Ngoma ya Ushindi", "Jicho la Mungu",
        "Kikombe cha Agano", "Upanga wa Haki", "Sarafu ya Fadhili", "Fimbo ya Uongozi", "Taji la Utukufu",
        "Moyo wa Huruma", "Ua la Kiroho", "Nyota ya Alfajiri", "Mwezi wa Usiku", "Chemchemi ya Hekima",
        "Tembo wa Amani", "Simba wa Ushindi", "Nyoka ya Hekima", "Fuwele la Upendo", "Kioo cha Roho",
        "Malaika wa Amani", "Mtoto wa Tumaini", "Mti wa Uhai", "Ngoma ya Shangwe", "Jicho la Hekima",
        "Kikombe cha Baraka", "Upanga wa Ushujaa", "Sarafu ya Wingi", "Fimbo ya Nguvu", "Taji la Enzi",
        "Moyo wa Imani", "Ua la Upendo", "Nyota ya Jioni", "Mwezi wa Mwangaza", "Chemchemi ya Furaha",
        "Tembo wa Nguvu", "Simba wa Hekima", "Nyoka ya Uzima", "Fuwele la Amani", "Kioo cha Malaika",
        "Malaika wa Nuru", "Mtoto wa Baraka", "Mti wa Ustawi", "Ngoma ya Amani", "Jicho la Upendo",
        "Kikombe cha Uzima", "Upanga wa Imani", "Sarafu ya Baraka", "Fimbo ya Rehema", "Taji la Fadhili",
        "Moyo wa Nguvu", "Ua la Hekima", "Nyota ya Mwezi", "Mwezi wa Nyota", "Chemchemi ya Imani",
        "Tembo wa Baraka", "Simba wa Amani", "Nyoka ya Nuru", "Fuwele la Malaika", "Kioo cha Mwezi",
        "Malaika wa Upendo", "Mtoto wa Amani", "Mti wa Hekima", "Ngoma ya Baraka", "Jicho la Malaika"
      ];
      const messages = [
        "Kikombe chako kimejaa baraka, leo utapokea zawadi isiyotarajiwa.",
        "Upanga wa haki uko mkononi mwako, usiogope kukata uhusiano unaokudhoofisha.",
        "Sarafu hii inatangaza mafanikio ya fedha, lakini kumbuka kushiriki na wahitaji.",
        "Fimbo ya wazee inakuongoza, heshimu busara ya waliokutangulia.",
        "Taji la nyota linang'aa juu yako, wito wa uongozi umekuja.",
        "Moyo wako uko wazi kupokea upendo mpya, usiufunge.",
        "Ua la amani linachanua moyoni mwako, toa radhi kwa waliokukosea.",
        "Nyota ya mchana inakupea mwanga wa kufanya uamuzi mgumu.",
        "Mwezi mtukufu anafunua siri za usiku, sikiliza ndoto zako.",
        "Chemchemi ya uzima inabubujika ndani yako, tembea karibu na maji.",
        "Tembo wa hekima anakumbusha: subira ni ufunguo wa kila mlango.",
        "Simba wa ushujaa anapiga ngurumo, sasa ni wakati wako kuchukua hatua.",
        "Nyoka wa uponyaji anakuacha ngozi ya zamani, zaliwa upya.",
        "Fuwele la nuru linawaka kifuani mwako, uwe na imani na njia yako.",
        "Kioo cha ukweli kinaonyesha sura yako halisi, jikubali.",
        "Malaika mlinzi yuko nyuma yako, hutawahi kuwa peke yako.",
        "Mtoto wa furaha anacheka karibu, cheka pamoja naye.",
        "Mti wa baraka umeota mizizi, familia yako itaunganishwa.",
        "Ngoma ya ushindi inapigwa, shangilia kwa kila hatua ndogo.",
        "Jicho la Mungu linakuangalia kwa upendo, uko salama.",
        "Kikombe cha agano kinazunguka, msamaha utarejesha amani.",
        "Upanga wa haki utakata minyororo ya dhuluma, kuwa na ujasiri.",
        "Sarafu ya fadhili itarudi kwako mara saba, endelea kutoa.",
        "Fimbo ya uongozi imekabidhiwa kwako, waongoze kwa upole.",
        "Taji la utukufu litavaa kichwani mwako baada ya jaribu.",
        "Moyo wa huruma unapasuka kwa wengine, lakini usijisahau.",
        "Ua la kiroho linanukia mbali, somo lako litawagusa wengi.",
        "Nyota ya alfajiri inatangaza mwanzo mpya, amka na shukrani.",
        "Mwezi wa usiku unakupepea usingizi wa amani, kesho ni siku mpya.",
        "Chemchemi ya hekima imefunguka, andika mawazo yanayokuja.",
        "Tembo wa amani anatembea polepole, usikimbilie hasira.",
        "Simba wa ushindi ameshinda vita, wewe pia utashinda.",
        "Nyoka ya hekima inajikunja na kunyooka, enda na mtiririko wa maisha.",
        "Fuwele la upendo linang'aa gizani, mtu anakupenda bila masharti.",
        "Kioo cha roho kinaakisi uzuri wako wa ndani, usijilinganishe na wengine.",
        "Malaika wa amani anapiga mbawa zake, utulivu utarudi nyumbani kwako.",
        "Mtoto wa tumaini anazaliwa, usiache kuota.",
        "Mti wa uhai una matunda kila msimu, shukrani kwa kila kipindi.",
        "Ngoma ya shangwe itakusanya watu wako, karibu wapendwa.",
        "Jicho la hekima linaona mbali, fanya uamuzi wa leo kwa mtazamo wa kesho.",
        "Kikombe cha baraka kinamwagika, pokea kwa unyenyekevu.",
        "Upanga wa ushujaa uko tayari, pambana na hofu zako.",
        "Sarafu ya wingi itajaza hazina yako, lakini usiwe mtumwa wa mali.",
        "Fimbo ya nguvu haitavunjika, tegemea misingi yako.",
        "Taji la enzi linangojea, utawala wako utakuwa wa haki.",
        "Moyo wa imani unadunda kwa utulivu, Mungu hayupo mbali.",
        "Ua la upendo limechanua, mwombee mwenzako.",
        "Nyota ya jioni inakuaga siku, toa shukrani kwa yaliyopita.",
        "Mwezi wa mwangaza unaongoza wasafiri, wewe ni mwanga kwa wengine.",
        "Chemchemi ya furaha haikai, tafuta sababu za kufurahi leo.",
        "Tembo wa nguvu anabeba mzigo wako, kaa chini, pumzika.",
        "Simba wa hekima anajua lini anyamaze, nyakati fulani kunyamaza ni dhahabu.",
        "Nyoka ya uzima inabadilisha ngozi, wewe pia unaweza kubadilika.",
        "Fuwele la amani limo ndani yako, litaleta utulivu popote uendapo.",
        "Kioo cha malaika kinaonyesha sifa zako nzuri, ziorodheshe leo.",
        "Malaika wa nuru anakufundisha jinsi ya kung'aa gizani.",
        "Mtoto wa baraka anacheza mbele yako, usichoke kufurahia maisha.",
        "Mti wa ustawi utazaa matunda mengi, endelea kulima mema.",
        "Ngoma ya amani inavuta roho za watu, weka amani kwanza.",
        "Jicho la upendo linaona mema kwa kila mtu, chagua kuona mema.",
        "Kikombe cha uzima hunywesha maji ya uzima, njaa yako ya kiroho itatosheka."
      ];

      // jumla ya kadi 130
      const oracleCards = [];
      for (let i = 1; i <= 130; i++) {
        const tIdx = (i-1) % titles.length;
        const title = titles[tIdx] + (i % 5 === 0 ? " II" : "");
        const msg = messages[(i-1) % messages.length];
        const img = oracleImages[(i-1) % oracleImages.length];
        oracleCards.push({ id: i, title, image_url: img, message: msg });
      }

      // ---------- MIPANGILIO YA HUDUMA ----------
      let selectedCards = [];
      let currentStep = 0;
      const lastReadingsKey = "drWilliamReadings"; // store array of timestamps
      const shuffleCloud = document.getElementById('shuffleCloud');
      const startScreen = document.getElementById('startScreen');
      const readingArea = document.getElementById('readingArea');
      const nextBtn = document.getElementById('nextCardBtn');
      const postNav = document.getElementById('postReadingNav');
      const kadiNyingineBtn = document.getElementById('kadiNyingineBtn');
      const stepBadges = [
        document.getElementById('step1Badge'),
        document.getElementById('step2Badge'),
        document.getElementById('step3Badge')
      ];
      const cards = [
        { card: document.getElementById('card1'), img: document.getElementById('card1Img'), title: document.getElementById('card1Title'), msg: document.getElementById('card1Msg') },
        { card: document.getElementById('card2'), img: document.getElementById('card2Img'), title: document.getElementById('card2Title'), msg: document.getElementById('card2Msg') },
        { card: document.getElementById('card3'), img: document.getElementById('card3Img'), title: document.getElementById('card3Title'), msg: document.getElementById('card3Msg') }
      ];
      const modal = document.getElementById('limitModal');

      // kufunga modal
      window.closeLimitModal = function() { modal.classList.add('hidden'); };

      // kuhifadhi kadi (alert)
      window.hifadhiKadi = function(index) {
        if (!selectedCards[index]) return;
        alert(`ðŸ”® "${selectedCards[index].title}" imehifadhiwa kwenye kumbukumbu yako.`);
      };

      // Angalia kama mtumiaji anaweza kusoma (max mara 2 kwa muda wa saa 24)
      function canRead() {
        const stored = localStorage.getItem(lastReadingsKey);
        if (!stored) return true;
        const timestamps = JSON.parse(stored);
        const now = Date.now();
        const oneDay = 24 * 60 * 60 * 1000;
        // filter timestamps zilizo ndani ya saa 24 zilizopita
        const recent = timestamps.filter(ts => now - ts < oneDay);
        // weka back ili zisije zikaongezeka ovyo (tunahifadhi upya baadaye)
        localStorage.setItem(lastReadingsKey, JSON.stringify(recent));
        return recent.length < 2; // kuruhusu mara 2 tu
      }

      function registerReading() {
        const stored = localStorage.getItem(lastReadingsKey);
        let timestamps = stored ? JSON.parse(stored) : [];
        timestamps.push(Date.now());
        // tunahifadhi tu za mwisho 2 (kwa usalama)
        if (timestamps.length > 2) timestamps = timestamps.slice(-2);
        localStorage.setItem(lastReadingsKey, JSON.stringify(timestamps));
      }

      // shuffle kubwa (muda mrefu 5.5s)
      function startShuffle() {
        if (!canRead()) {
          modal.classList.remove('hidden');
          return;
        }

        startScreen.classList.add('hidden');
        readingArea.classList.remove('hidden');
        postNav.classList.add('hidden');
        nextBtn.parentElement.classList.remove('hidden');

        currentStep = 0;
        stepBadges.forEach((b, i) => {
          b.classList.remove('border-amber-500', 'bg-amber-700/70');
          b.classList.add('border-amber-500/40', 'bg-amber-800/30');
        });

        cards.forEach(c => {
          c.card.classList.add('opacity-0');
          c.card.classList.remove('flipped');
        });

        // ondoa cloud ikiwepo
        shuffleCloud.innerHTML = '';
        shuffleCloud.classList.remove('hidden');

        // tengeneza kadi 300 zinazoruka
        for (let i = 0; i < 320; i++) {
          const part = document.createElement('div');
          part.className = 'shuffle-particle';
          const startX = (Math.random() * 300 - 150) + 'vw';
          const startY = (Math.random() * 300 - 150) + 'vh';
          const endX = (Math.random() * 100 - 50) + '%';
          const endY = (Math.random() * 100 - 50) + '%';
          const rot = Math.random() * 720;
          part.style.setProperty('--start-x', startX);
          part.style.setProperty('--start-y', startY);
          part.style.setProperty('--end-x', endX);
          part.style.setProperty('--end-y', endY);
          part.style.setProperty('--rot', rot + 'deg');
          part.style.left = '0';
          part.style.top = '0';
          part.style.width = '75px';
          part.style.height = '115px';
          shuffleCloud.appendChild(part);
        }

        // baada ya sek 5.5, chagua kadi na anza kufunua
        setTimeout(() => {
          shuffleCloud.innerHTML = '';
          shuffleCloud.classList.add('hidden');

          // chagua kadi 3 tofauti nasibu
          const shuffled = [...oracleCards].sort(() => 0.5 - Math.random());
          selectedCards = shuffled.slice(0, 3);

          cards.forEach((c, idx) => {
            c.img.src = selectedCards[idx].image_url;
            c.title.innerText = selectedCards[idx].title;
            c.msg.innerText = selectedCards[idx].message;
          });

          // rekodi kuwa amesoma
          registerReading();

          revealNextCard();
        }, 5500);
      }

      function revealNextCard() {
        if (currentStep >= 3) {
          nextBtn.parentElement.classList.add('hidden');
          postNav.classList.remove('hidden');
          return;
        }

        stepBadges[currentStep].classList.remove('border-amber-500/40', 'bg-amber-800/30');
        stepBadges[currentStep].classList.add('border-amber-500', 'bg-amber-700/70');

        const cardEl = cards[currentStep].card;
        cardEl.classList.remove('opacity-0');
        setTimeout(() => {
          cardEl.classList.add('flipped');
        }, 70);

        currentStep++;

        if (currentStep === 3) {
          setTimeout(() => {
            if (currentStep === 3) {
              nextBtn.parentElement.classList.add('hidden');
              postNav.classList.remove('hidden');
            }
          }, 1300);
        }
      }

      // vifungo
      document.getElementById('vutaKadiBtn').addEventListener('click', startShuffle);
      nextBtn.addEventListener('click', revealNextCard);
      kadiNyingineBtn.addEventListener('click', () => {
        if (!canRead()) {
          modal.classList.remove('hidden');
          return;
        }
        startShuffle();
      });

      // Kitufe cha next page â€“ weka link yako hapa
      const nextPageLink = document.getElementById('nextPageLink');
      // Mfano: nextPageLink.href = "https://www.example.com";
      // Sasa ni placeholder '#';= "#"; // <-- BADILISHA HII NA LINK YAKO HALISI
    })();
  </script>
  <!-- mwongozo mdogo wa kurekebisha kiungo (kwenye kona) -->
  <div style="position: fixed; bottom: 10px; right: 10px; background: rgba(0,0,0,0.6); color: #d4af37; padding: 8px 16px; border-radius: 40px; font-size: 15px; backdrop-filter: blur(4px); border: 1px solid #b49450;">
    âœ¦KUTAZAMA KADI NI MARA 2 KWA SIKU<code style="background:black;padding:2px 6px;border-radius:8px;">âœ¦
  </div>
</body>
</html>
